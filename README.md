
# Encrypted Transfer System (端到端加密传输系统)

一个基于 Web 的**零知识（Zero-Knowledge）**隐私信息传输平台。
集成了“**阅后即焚私密笔记**”、“**临时加密会话**”与“**公开聊天大厅**”三大核心板块。

所有数据均在**本地浏览器端完成高强度加密**（AES-GCM），服务器仅负责存储密文。这意味着**即便是服务器管理员，也无法窥探您的任何内容**。

## ✨ 核心特性

### 🛡️ 极致安全 (End-to-End Encryption)
* **端到端加密**：利用 Web Crypto API 在本地加密数据。发送给服务器的只有乱码。
* **零知识架构**：解密密钥包含在分享链接的 Hash 中（或由用户口令生成），服务器永远无法获取密钥。
* **无痕存储**：无后台、无日志、无用户系统，数据物理销毁后不可恢复。

### 📝 私密笔记 (Secure Notes)
* **灵活销毁**：支持“阅后即焚”（阅读一次即删）或“限时销毁”（过期前可多次阅读）。
* **密码保护**：可选设置访问密码，为您的秘密加第二道锁。
* **自动过期**：支持设置 1小时 / 24小时 / 7天 后自动物理删除。

### 💬 实时聊天 (Ephemeral Chat)
* **双模式支持**：
    * **临时私聊**：一键创建私密房间，**房主在线即存活**。房主关闭页面或退出后，房间及记录立即销毁。
    * **公开大厅**：管理员可创建公开显示的房间，访客需凭密码进入，适合群组交流。
* **延时销毁**：消息在服务器保留 **5分钟**，保证对话连贯性，随后物理删除。
* **文件传输**：集成文件中转站功能，支持在聊天中快速分享文件。

## 🚀 快速部署

本项目设计为开箱即用，支持 Docker 一键部署。

### 🐳 使用 Docker (推荐)

适用于 Leaflow, Sealos, Zeabur 或任意 VPS。

```bash
# 1. 拉取并运行 (请替换 <your-image-name> 为你的镜像名)
# 可选：通过 -e ADMIN_PASSWORD="yourpassword" 设置管理员口令（默认 admin888）
docker run -d -p 8787:8787 --name secure-transfer -e ADMIN_PASSWORD="admin888" <your-image-name>
````

启动后，访问 `http://localhost:8787` (或你的域名) 即可使用。

-----

### 💻 本地开发

1.  **克隆仓库**

    ```bash
    git clone [https://github.com/sykin7/secret-note.git](https://github.com/sykin7/secret-note.git)
    cd secret-note
    ```

2.  **安装依赖** (Python 3.9+)

    ```bash
    pip install -r requirements.txt
    ```

3.  **运行**

    ```bash
    # (可选) 设置管理员密码
    export ADMIN_PASSWORD="mysecretpass"
    python app.py
    ```

## 📖 使用指南

### 1\. 发送私密笔记

  * 输入敏感信息（如密码、API Key）。
  * 选择是否开启 **“🔥 阅后即焚”** 开关。
  * 点击生成，**复制生成的链接**发送给对方。

### 2\. 发起加密聊天

  * **临时私聊 (推荐)**：
      * 点击首页“临时私聊”。
      * 进入房间后点击右上角“🔗 复制邀请链接”发给好友。
      * **注意**：作为房主，您必须保持页面开启。一旦您退出，房间将立即销毁，对方也无法继续发送。
  * **公开大厅**：
      * 点击“创建公开房间”（需输入管理员口令），设置房间名和进房密码。
      * 房间将显示在大厅列表中，访客点击加入并输入密码即可聊天。
      * 管理员可在列表页点击红色的 `×` 按钮删除房间。
  * **传输文件**：
      * 在聊天输入框左侧点击 **“📂”** 按钮，上传文件后将链接发送到聊天室。

## 🛠️ 技术栈

  * **前端加密**: Web Crypto API (AES-GCM 256位加密)
  * **后端框架**: Python Flask
  * **数据存储**: SQLite3 (仅存储密文)
  * **运行环境**: Docker / Gunicorn

## ⚙️ 环境变量

| 变量名 | 默认值 | 描述 |
| :--- | :--- | :--- |
| `PORT` | `8787` | 应用监听端口 |
| `ADMIN_PASSWORD` | `admin888` | 创建/删除公开大厅房间的管理员口令 |

## ⚠️ 安全免责声明

本项目采用行业标准的加密算法（AES-GCM + PBKDF2），旨在提供比传统即时通讯软件更高的隐私保护。
但请注意：

1.  **链接即密钥**：请务必通过安全渠道发送分享链接。
2.  **环境安全**：请确保您的设备未中木马，且使用支持 HTTPS 的浏览器访问。

作者不对因使用本软件产生的任何数据丢失或泄露承担责任。

## License

GPL-3.0 license.

```
```
